{"version":3,"sources":["components/Pform.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","components/App.js","index.js"],"names":["Pform","onSubmit","this","props","name","onChange","type","React","Component","Persons","people","map","person","key","id","number","onClick","handleDelete","Filter","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","handleChange","evt","setState","target","value","handleSubmit","preventDefault","persons","state","newName","newNumber","some","item","find","per","window","confirm","personService","res","Object","assign","catch","err","nfClass","nfMessage","concat","error","itemId","filter","search","nameList","length","toLowerCase","includes","curState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.de2de4bd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nclass Pform extends React.Component {\r\n  render() {\r\n        return (\r\n            <form onSubmit={ this.props.onSubmit }>\r\n                <div>\r\n                    Nimi: <input name=\"newName\" onChange={ this.props.onChange } />\r\n                </div>\r\n                <div>\r\n                    Numero: <input name=\"newNumber\" onChange={ this.props.onChange } />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">Lisää</button>\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Pform\r\n","import React from 'react'\r\n\r\nexport default class Persons extends React.Component {\r\n\r\n  render() {\r\n        return (\r\n          <div>\r\n            { this.props.people.map( person =>\r\n              <div key={ person.id }>\r\n                <p>{ person.name } {person.number}</p><button onClick={this.props.handleDelete(person.id)}>Delete</button>\r\n              </div>\r\n            ) }\r\n          </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class Filter extends React.Component {\r\n  render() {\r\n    return (\r\n      <form>\r\n        Filter: <input name=\"search\" onChange={this.props.onChange}/>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={type}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import axios from \"axios\";\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteItem = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  deleteItem: deleteItem\r\n}\r\n","import React from 'react'\r\nimport Pform from './Pform.js'\r\nimport Persons from './Persons.js'\r\nimport Filter from './Filter.js'\r\nimport Notification from './Notification.js'\r\nimport personService from \"../services/persons\";\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      people: [],\r\n      newName: '',\r\n      newNumber: '',\r\n      search: '',\r\n      nfMessage: null,\r\n      nfClass: \"\"\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    personService\r\n    .getAll()\r\n    .then( res => {\r\n      this.setState({people: res})\r\n    })\r\n  }\r\n\r\n  handleChange = evt => {\r\n    this.setState({\r\n      [evt.target.name]: evt.target.value\r\n    });\r\n\r\n  }\r\n\r\n  handleSubmit = evt => {\r\n    evt.preventDefault();\r\n\r\n    const persons = {\r\n      name: this.state.newName,\r\n      number: this.state.newNumber\r\n    };\r\n\r\n    if (!this.state.people.some(item => item.name === persons.name)) {\r\n      personService\r\n      .create(persons)\r\n      .then(per => {\r\n        this.setState({\r\n          people: this.state.people.concat(per),\r\n          nfClass: \"success\",\r\n          nfMessage: \"Added \"+per.name\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setState({\r\n          nfClass: \"error\",\r\n          nfMessage: err.response.data.error\r\n        })\r\n      })\r\n    } else {\r\n      var id = this.state.people.find(per => per.name === persons.name).id;\r\n\r\n      if (window.confirm(`${persons.name} is already added to phonebook, replace the old number with a new one?`)) {\r\n        personService\r\n        .update(id, persons)\r\n        .then(res => {\r\n            this.setState({\r\n              people: this.state.people.map(per => per.id === res.id\r\n              ? Object.assign({}, per, { number: res.number })\r\n              : per\r\n            )\r\n          })\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            nfClass: \"error\",\r\n            nfMessage: err.response.data\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  handleDelete = itemId => evt => {\r\n    if (window.confirm(`Delete ${this.state.people.find(per => per.id === itemId).name}?`)) {\r\n      personService\r\n      .deleteItem(itemId)\r\n      .then(res => {\r\n        this.setState({\r\n          people: this.state.people.filter(per => per.id !== itemId),\r\n          nfMessage: \"Successfully deleted a phonebook\",\r\n          nfClass: \"success\"\r\n        })\r\n      })\r\n      .catch(res => {\r\n        this.setState({\r\n          people: this.state.people.filter(per => per.id !== itemId),\r\n          nfMessage: \"Item has already been removed from the server\",\r\n          nfClass: \"error\"\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const nameList = this.state.search.length <= 0\r\n      ? this.state.people\r\n      : this.state.people.filter(person => person.name.toLowerCase().includes(this.state.search.toLowerCase()));\r\n\r\n    return (\r\n      <div>\r\n        <h2>Phonebook</h2>\r\n        <Notification message={this.state.nfMessage} type={this.state.nfClass}/>\r\n        <Filter onChange={this.handleChange} curState={this.state} />\r\n        <h2>Add a new</h2>\r\n        <Pform onChange={this.handleChange} onSubmit={this.handleSubmit} curState={this.state}/>\r\n        <h2>Numbers</h2>\r\n        <Persons people={nameList} handleDelete={this.handleDelete}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}